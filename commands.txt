PSQL Commands:

\l : list all databases
\c <dbname> : switch to databases
\dt : list all the tables 
\d <table name> : describe the table 
\du : list of users there in database 

select * from pg_stat_activity;  : list all the active users in the database 

select version(); 
\g : get the version of the pgsql 

\! cls : clear the console 


Testing client to cluster communication with primary

kubectl apply -f psql-client.yaml
kubectl get pods
kubectl get svc
kubectl get pods
clear
kubectl exec - it psql-client.sh

    # echo $SERVICE_NAME

    # PGPASSWORD=$POSTGRES_PASSWORD psql -h "$SERVICE_NAME" -U "$POSTGRES-USER" - d "$POSTGRES_DB"
    # INSERT INTO test (name) SELECT 'test' FROM generate_series(1, 1000);
    # select count(*) from test;


# wall edits

rm -rf pg_k8s
git clone github.com/vijaynvb/pg_k8s/
kubectl apply -f cluster-example-upgrade_wal.yaml 
kubectl cnpg restart cluster-example
cat sqltest.sql
kubectl exec -it cluster-example-1 -- psql 
kubectl describe cluster cluster-example